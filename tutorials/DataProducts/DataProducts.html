
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ICESat-2 data products &#8212; ICESat-2 Hackweek 2022</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet">
  <link href="../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.1/dist/embed-amd.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="ICESat-2 Data Discovery, Visualization, and Access Resources" href="../data_access/data_access_1_intro.html" />
    <link rel="prev" title="GitHub, Git, JupyterHub" href="../jupyter.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-LZVEY6377Z"></script>
<script>
                    window.dataLayer = window.dataLayer || [];
                    function gtag(){ dataLayer.push(arguments); }
                    gtag('js', new Date());
                    gtag('config', 'G-LZVEY6377Z');
                </script>

  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">ICESat-2 Hackweek 2022</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../intro.html">
   Welcome to ICESat-2 Hackweek!
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Details
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../application.html">
   Application
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://icesat-2.hackweek.io/index.html?jump_to=schedule">
   Schedule
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://icesat-2.hackweek.io/index.html?jump_to=team">
   Team
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../mission.html">
   Hackweek Mission
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../CoC.html">
   Event Code of Conduct
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Preparation
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../preliminary/index.html">
   Preliminary Work
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../preliminary/swc.html">
     Software Carpentry Training
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../preliminary/github.html">
     GitHub
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../preliminary/jupyterhub.html">
     JupyterHub
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../preliminary/git.html">
     Git
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../preliminary/earthdata.html">
     Earthdata Login
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../preliminary/earthengine.html">
     Google Earth Engine Sign-Up
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../preliminary/python.html">
     Python Installation
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Tutorials
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../index.html">
   Tutorials
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="../jupyter.html">
     GitHub, Git, JupyterHub
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     ICESat-2 data products
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../data_access/data_access_1_intro.html">
     ICESat-2 Data Discovery, Visualization, and Access Resources
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
    <label for="toctree-checkbox-3">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../data_access/data_access_2_earthdata.html">
       Data Discovery and Access via
       <strong>
        earthdata
       </strong>
       library
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../data_access/data_access_3_icepyx.html">
       Accessing ICESat-2 Data Using icepyx
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../ObjectOriented/index.html">
     Object-Oriented Programming for Collaborative Development in Python
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
    <label for="toctree-checkbox-4">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../ObjectOriented/OOP_tutorial_live.html">
       Object-Oriented Programming Tutorial (live)
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../ObjectOriented/OOP_tutorial.html">
       Object-Oriented Programming Tutorial
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../ObjectOriented/alien.html">
       Alien exercise
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../geospatial/geospatial-intro.html">
     Geospatial Transforms
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
    <label for="toctree-checkbox-5">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../geospatial/geospatial-advanced.html">
       Geospatial Transformations In-depth
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../DataVisualization/Visualization_Earth_Engine_geemap_IS2_HW_2022.html">
     Interactive Visualizion with Open Altimetry &amp; Google Earth Engine
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
    <label for="toctree-checkbox-6">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../DataVisualization/Visualization_geemap_use_examples.html">
       OpenAltimery and GEE Use Examples
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../DataIntegration/dataintegration-1.html">
     Data integration with ICESat-2 - Part I
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
    <label for="toctree-checkbox-7">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../DataIntegration/dataintegration-2.html">
       Data integration with ICESat-2 - Part II
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../DataIntegration/data-applications.html">
       ICESat-2 Applications: GrIMP + SlideRule
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../cloud-computing/cloud-computing-tutorial.html">
     Cloud Computing Tutorial
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../DataVisualization/dataviz2d.html">
     <strong>
      Making nice maps for posters with Python
     </strong>
     🗺️+🐍
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Projects
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../projects/list_of_projects.html">
   List of Projects
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../projects/index.html">
   Projects
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../projects/project_roles.html">
     Project Roles
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../projects/project_roadmap.html">
     Project Roadmap
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../projects/project_initialization.html">
     Project Initialization
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Reference
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../reference/glossary.html">
   Glossaries
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../reference/IS2-resources.html">
   ICESat-2 Resources
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../reference/bibliography.html">
   Bibliography
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../reference/open_science.html">
   Open Science
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../reference/open_source_software.html">
   Open-source Software
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../reference/questions.html">
   How to Get Help
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/tutorials/DataProducts/DataProducts.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/ICESAT-2HackWeek/website2022"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/ICESAT-2HackWeek/website2022/issues/new?title=Issue%20on%20page%20%2Ftutorials/DataProducts/DataProducts.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/ICESAT-2HackWeek/website2022/edit/main/book/tutorials/DataProducts/DataProducts.ipynb"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/ICESAT-2HackWeek/website2022/main?urlpath=lab/tree/book/tutorials/DataProducts/DataProducts.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   ICESat-2 data products
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#learning-goals">
     Learning goals
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#get-access-to-earthdata-using-a-netrc-file-you-ll-need-to-do-this-to-run-the-notebook">
   0.  Get access to earthdata using a .netrc file.  You’ll need to do this to run the notebook!
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#location">
     1. Location
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#atl15-data">
     2. ATL15 data.
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-note-on-data-access">
     A note on data access:
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#atl11-along-track-height-data">
     3. ATL11 along-track height data
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#finding-atl11-data-using-icepyx-and-cmr">
       3.1 Finding ATL11 data using IcePyx and CMR
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#reading-atl11-data-into-a-dictionary">
       3.2 Reading ATL11 data into a dictionary
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#plotting-atl11-measurement-locations">
       3.3 Plotting ATL11 measurement locations
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#plotting-atl11-heights">
       3.4 Plotting ATL11 heights
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#atl06-height-data">
     4. ATL06 height data
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#querying-cmr-for-atl06-on-a-specific-track">
       4.1 Querying CMR for ATL06 on a specific track
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#structure-of-an-atl06-granule">
       4.2 Structure of an ATL06 granule
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#reading-atl06-data-into-a-dictionary">
       4.3 Reading ATL06 data into a dictionary:
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#plotting-atl06-data">
       4.3 Plotting ATL06 data
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#atl03-data-from-sliderule">
     5. ATL03 data from SlideRule
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#plotting-atl03-photon-heights-and-confidence-values">
       5.1  Plotting ATL03 photon heights and confidence values:
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#summary">
     Summary
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>ICESat-2 data products</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   ICESat-2 data products
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#learning-goals">
     Learning goals
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#get-access-to-earthdata-using-a-netrc-file-you-ll-need-to-do-this-to-run-the-notebook">
   0.  Get access to earthdata using a .netrc file.  You’ll need to do this to run the notebook!
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#location">
     1. Location
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#atl15-data">
     2. ATL15 data.
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-note-on-data-access">
     A note on data access:
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#atl11-along-track-height-data">
     3. ATL11 along-track height data
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#finding-atl11-data-using-icepyx-and-cmr">
       3.1 Finding ATL11 data using IcePyx and CMR
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#reading-atl11-data-into-a-dictionary">
       3.2 Reading ATL11 data into a dictionary
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#plotting-atl11-measurement-locations">
       3.3 Plotting ATL11 measurement locations
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#plotting-atl11-heights">
       3.4 Plotting ATL11 heights
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#atl06-height-data">
     4. ATL06 height data
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#querying-cmr-for-atl06-on-a-specific-track">
       4.1 Querying CMR for ATL06 on a specific track
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#structure-of-an-atl06-granule">
       4.2 Structure of an ATL06 granule
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#reading-atl06-data-into-a-dictionary">
       4.3 Reading ATL06 data into a dictionary:
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#plotting-atl06-data">
       4.3 Plotting ATL06 data
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#atl03-data-from-sliderule">
     5. ATL03 data from SlideRule
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#plotting-atl03-photon-heights-and-confidence-values">
       5.1  Plotting ATL03 photon heights and confidence values:
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#summary">
     Summary
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="icesat-2-data-products">
<h1>ICESat-2 data products<a class="headerlink" href="#icesat-2-data-products" title="Permalink to this headline">¶</a></h1>
<p>This tutorial is meant to show some examples of the standard land-ice data products put out by the ICESat-2 project.  It is not a comprehensive look at all the products, nor does it document all the features available in the product is shows.  Rather, it presents some tools for looking at the data, and shows how the information flows between land-ice products.</p>
<div class="section" id="learning-goals">
<h2>Learning goals<a class="headerlink" href="#learning-goals" title="Permalink to this headline">¶</a></h2>
<ol class="simple">
<li><p>Demonstrate basic HDF-5 product structures of ICESat-2 standard data products</p></li>
<li><p>Demonstrate the flow of information from the lowest-level products to the highest-level products (or vice versa)</p></li>
<li><p>Data search using geographic regions and file names using icePyx</p></li>
<li><p>File-level data access from NSIDC</p></li>
<li><p>Photon data access using SlideRule</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># import packages:</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>                   <span class="c1"># Numeric Python</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>      <span class="c1"># Plotting routines</span>
<span class="kn">import</span> <span class="nn">h5py</span>                          <span class="c1"># general HDF5 reading/writing library</span>
<span class="kn">import</span> <span class="nn">rioxarray</span> <span class="k">as</span> <span class="nn">rx</span>               <span class="c1"># Package to read raster data from hdf5 files</span>
<span class="kn">from</span> <span class="nn">pyproj</span> <span class="kn">import</span> <span class="n">Transformer</span><span class="p">,</span> <span class="n">CRS</span>  <span class="c1"># libraries to allow coordinate transforms</span>
<span class="kn">import</span> <span class="nn">glob</span>                          <span class="c1"># Package to locate files on disk</span>
<span class="kn">import</span> <span class="nn">os</span>                            <span class="c1"># File-level utilities</span>
<span class="kn">import</span> <span class="nn">re</span>                            <span class="c1"># regular expressions for string interpretation</span>
<span class="kn">import</span> <span class="nn">icepyx</span> <span class="k">as</span> <span class="nn">ipx</span>                 <span class="c1"># Package to interact with ICESat-2 online resources</span>
<span class="kn">from</span> <span class="nn">sliderule</span> <span class="kn">import</span> <span class="n">icesat2</span>        <span class="c1"># Package for online ICESat-2 processing</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Please note: This tutorial is best run in interactive mode,</span>
<span class="c1"># but is archived with the interactive section disabled.</span>
<span class="c1"># To enable interactive mode, comment the next line, and uncomment the second line:</span>
<span class="o">%</span><span class="k">matplotlib</span> inline  
<span class="c1">#%matplotlib widget </span>
<span class="o">%</span><span class="k">config</span> InlineBackend.figure_format = &#39;retina&#39;
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="get-access-to-earthdata-using-a-netrc-file-you-ll-need-to-do-this-to-run-the-notebook">
<h1>0.  Get access to earthdata using a .netrc file.  You’ll need to do this to run the notebook!<a class="headerlink" href="#get-access-to-earthdata-using-a-netrc-file-you-ll-need-to-do-this-to-run-the-notebook" title="Permalink to this headline">¶</a></h1>
<p>We will need to generate a (hidden) .netrc file in our local directory.  The 2021 Cloud Hackathon came up with a function that does this painlessly.  You’ll only have to run this once on each computer you use for this tutorial.  If you’re running interactively, you’ll have to uncomment two lines in the next cell and run that cell.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#DEFAULT: to generate the rendered tutorial for the book. Comment these two lines if you are running interactively</span>
<span class="n">HOST</span> <span class="o">=</span> <span class="s1">&#39;https://urs.earthdata.nasa.gov&#39;</span>
<span class="n">ipx</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">Earthdata</span><span class="o">.</span><span class="n">Earthdata</span><span class="p">(</span><span class="s1">&#39;uwhackweek&#39;</span><span class="p">,</span><span class="s1">&#39;hackweekadmin@gmail.com&#39;</span><span class="p">,</span> <span class="n">HOST</span><span class="p">)</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>

<span class="c1"># If you are running interactively, uncomment these two lines, and run this cell!</span>
<span class="c1">#from setup_earthdata_netrc import setup_earthdata_netrc</span>
<span class="c1">#setup_earthdata_netrc()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="location">
<h2>1. Location<a class="headerlink" href="#location" title="Permalink to this headline">¶</a></h2>
<p>We will be looking at Svalbard in the Norwegian Arctic, focusing on the massive surge from the Austfonna ice cap.  This started in 2010, and the ice cap is still adjusting to the rapid loss of ice, so we expect to see large thinning rates in the area affected by the surge.  We will use the ICESat-2 ATL15 product for a look at the mass-loss pattern over the last three years.</p>
<p><img alt="Svalbard" src="../../_images/feart-08-00156-g001_small.jpg" /></p>
<p>Photo credit: Schuler et. al, Front. Earth Sci., 27 May 2020 | <a class="reference external" href="https://doi.org/10.3389/feart.2020.00156">https://doi.org/10.3389/feart.2020.00156</a></p>
</div>
<div class="section" id="atl15-data">
<h2>2. ATL15 data.<a class="headerlink" href="#atl15-data" title="Permalink to this headline">¶</a></h2>
<p>ATL15 provides a high-level map of how ice-surface heights have changed.  It supplies grids of surface-height differences relative to a January-2020 reference surface, at quarter-year, 1-km resolution.  It comes in subsets for different polar glaciated regions:</p>
<p>The Antarctic and Greenland full-resolution granules are large, but the smaller regions () are compact files that are quick to download.</p>
<p>We’ll download these files directly from NSIDC using the unix ‘wget’ command.  You’ll need to have your login credentials set up for this to work.  Please check near the top of this tutorial (section zero) for help with this.</p>
<p>Once our credentials are set up, we can use wget to download the ATL15 Svalbard granule:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Download (-nc = &quot;no clobber&quot; if it already exists</span>
<span class="n">ds_url</span><span class="o">=</span><span class="s1">&#39;https://n5eil01u.ecs.nsidc.org/ATLAS/ATL15.001/2019.03.29/ATL15_SV_0311_01km_001_01.nc&#39;</span>
<span class="o">!</span> wget  -nc <span class="o">{</span>ds_url<span class="o">}</span> -O /tmp/ATL15_SV_0311_01km_001_01.nc
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="a-note-on-data-access">
<h2>A note on data access:<a class="headerlink" href="#a-note-on-data-access" title="Permalink to this headline">¶</a></h2>
<p>If the previous slide did not download data, you may need to revisit the commented cell just after section zero (0. Get access to earthdata using a .netrc file. You’ll need to do this to run the notebook!)</p>
<p>The data we want to look at are in the delta_h group, and we can see the structure of the product by opening it with <em>rioxarray</em>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">=</span><span class="n">rx</span><span class="o">.</span><span class="n">open_rasterio</span><span class="p">(</span><span class="s1">&#39;/tmp/ATL15_SV_0311_01km_001_01.nc&#39;</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="s1">&#39;delta_h&#39;</span><span class="p">,</span> <span class="n">masked</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ds</span>
</pre></div>
</div>
</div>
</div>
<p>The datasets here represent surface-height differences relative to 2020.0.  For a quick view of what is going on, we can make a map of the mean height change rate from the start of the mission to the present:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># note that time is in days after Jan 1 2018</span>
<span class="n">dhdt</span> <span class="o">=</span> <span class="p">(</span><span class="n">ds</span><span class="p">[</span><span class="s1">&#39;delta_h&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">,:,:]</span><span class="o">-</span><span class="n">ds</span><span class="p">[</span><span class="s1">&#39;delta_h&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">,:,:])</span><span class="o">/</span><span class="p">(</span><span class="n">ds</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">ds</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span><span class="o">*</span><span class="mf">365.25</span>
<span class="n">extent</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">ds</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">])</span><span class="o">-</span><span class="mi">500</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">ds</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">])</span><span class="o">+</span><span class="mi">500</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">ds</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">])</span><span class="o">-</span><span class="mi">500</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">ds</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">])</span><span class="o">+</span><span class="mi">500</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">();</span> 
<span class="n">hax</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span>
<span class="n">h_im</span><span class="o">=</span><span class="n">hax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">dhdt</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;Spectral&#39;</span><span class="p">,</span>  <span class="n">extent</span><span class="o">=</span><span class="n">extent</span><span class="p">)</span>
<span class="n">hax</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">hax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="o">-</span><span class="mf">0.8e6</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.2e6</span><span class="p">])</span>
<span class="n">hax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;polar-stereographic x&#39;</span><span class="p">)</span>
<span class="n">hax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;polar-stereographic y&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">h_im</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;height-change rate, m/yr&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<p>If you are looking at the map in interactive mode (%matplotlib widget in the first cell) you can use the box-zoom button to zoom in on the edge of the surging glacier, or you can run the next cell to zoom to pre-selected region:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">YR</span><span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">4.2e5</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.85e5</span><span class="p">])</span>
<span class="n">XR</span><span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.015e6</span><span class="p">,</span> <span class="mf">1.060e6</span><span class="p">])</span>
<span class="n">hax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">XR</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]],</span> <span class="n">YR</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]],</span><span class="s1">&#39;k&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">();</span> 
<span class="n">ax1</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span>
<span class="n">h_im</span><span class="o">=</span><span class="n">ax1</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">dhdt</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;Spectral&#39;</span><span class="p">,</span>  <span class="n">extent</span><span class="o">=</span><span class="n">extent</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">XR</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">YR</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">h_im</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;dh/dt, m/yr&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<p>If we want to see the height change for a point, we can find the x and y coordinates that are closest to that point, and plot the delta_h variable for those coordinates.  Let’s do that for the point a the center of the current zoomed view, and for another point 12 km to the left:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># get the limits of the current axes, mark the center</span>
<span class="n">XR</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">ax1</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">())</span>  <span class="c1">#&lt;----------In interactive mode, try zooming in on a different location</span>
<span class="n">YR</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">ax1</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">())</span>
<span class="n">xc</span><span class="o">=</span><span class="n">XR</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">yc</span><span class="o">=</span><span class="n">YR</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="c1"># find the point closest to the axes center:</span>
<span class="n">col</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">argmin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">x</span><span class="p">)</span><span class="o">-</span><span class="n">xc</span><span class="p">))</span>
<span class="n">row</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">argmin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">y</span><span class="p">)</span><span class="o">-</span><span class="n">yc</span><span class="p">))</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">ds</span><span class="o">.</span><span class="n">y</span><span class="p">[</span><span class="n">row</span><span class="p">],</span><span class="s1">&#39;k*&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">ax2</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">time</span><span class="o">/</span><span class="mf">365.25</span><span class="o">+</span><span class="mi">2018</span><span class="p">,</span> <span class="n">ds</span><span class="o">.</span><span class="n">delta_h</span><span class="p">[:,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">],</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="p">)</span>

<span class="c1"># find another point 12 km to the left of the center:</span>
<span class="n">col</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">argmin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">x</span><span class="p">)</span><span class="o">-</span><span class="p">(</span><span class="n">xc</span><span class="o">-</span><span class="mi">12000</span><span class="p">)))</span>
<span class="n">row</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">argmin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">y</span><span class="p">)</span><span class="o">-</span><span class="n">yc</span><span class="p">))</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">ds</span><span class="o">.</span><span class="n">y</span><span class="p">[</span><span class="n">row</span><span class="p">],</span><span class="s1">&#39;g*&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">time</span><span class="o">/</span><span class="mf">365.25</span><span class="o">+</span><span class="mi">2018</span><span class="p">,</span> <span class="n">ds</span><span class="o">.</span><span class="n">delta_h</span><span class="p">[:,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">],</span><span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;time&#39;</span><span class="p">);</span> <span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;height WRT 2020.0, m&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="atl11-along-track-height-data">
<h2>3. ATL11 along-track height data<a class="headerlink" href="#atl11-along-track-height-data" title="Permalink to this headline">¶</a></h2>
<p>We might be interested to see where these height changes come from.  ATL15 is derived from the ATL11 (along-track height change) product, which maps height changes for individual ICESat-2 reference tracks.  We don’t necessarily know what track has contributed to the height change at any given point, so we need to bring in some more data-discovery tools to get there.</p>
<div class="section" id="finding-atl11-data-using-icepyx-and-cmr">
<h3>3.1 Finding ATL11 data using IcePyx and CMR<a class="headerlink" href="#finding-atl11-data-using-icepyx-and-cmr" title="Permalink to this headline">¶</a></h3>
<p>We can use a CMR (Common Metadata Repository) query through icepyx to find what ATL11 granules have contributed to the height changes we see above.  CMR queries are conducted in latitude and longitude, rather than projected coordinates, so we’ll need to find the latitude and longitude for the zoomed-in axes using pyproj:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Prepare coordinate transformations between lat/lon and the ATL15 coordinate system</span>
<span class="n">crs</span><span class="o">=</span><span class="n">CRS</span><span class="o">.</span><span class="n">from_epsg</span><span class="p">(</span><span class="mi">3413</span><span class="p">)</span>
<span class="n">to_xy_crs</span><span class="o">=</span><span class="n">Transformer</span><span class="o">.</span><span class="n">from_crs</span><span class="p">(</span><span class="n">crs</span><span class="o">.</span><span class="n">geodetic_crs</span><span class="p">,</span> <span class="n">crs</span><span class="p">)</span>
<span class="n">to_geo_crs</span><span class="o">=</span><span class="n">Transformer</span><span class="o">.</span><span class="n">from_crs</span><span class="p">(</span><span class="n">crs</span><span class="p">,</span> <span class="n">crs</span><span class="o">.</span><span class="n">geodetic_crs</span><span class="p">)</span>

<span class="n">corners_lat</span><span class="p">,</span> <span class="n">corners_lon</span><span class="o">=</span><span class="n">to_geo_crs</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">XR</span><span class="p">)[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]],</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">YR</span><span class="p">)[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>
<span class="n">latlims</span><span class="o">=</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">corners_lat</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">corners_lat</span><span class="p">)]</span>
<span class="n">lonlims</span><span class="o">=</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">corners_lon</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">corners_lon</span><span class="p">)]</span>
</pre></div>
</div>
</div>
</div>
<p>We’ll use these limits for a CMR query:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">region_a</span> <span class="o">=</span> <span class="n">ipx</span><span class="o">.</span><span class="n">Query</span><span class="p">(</span><span class="s1">&#39;ATL11&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">lonlims</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">latlims</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">lonlims</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">latlims</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="p">[</span><span class="s1">&#39;2018-01-01&#39;</span><span class="p">,</span><span class="s1">&#39;2022-06-01&#39;</span><span class="p">],</span> \
                          <span class="n">start_time</span><span class="o">=</span><span class="s1">&#39;00:00:00&#39;</span><span class="p">,</span> <span class="n">end_time</span><span class="o">=</span><span class="s1">&#39;23:59:59&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">region_a</span><span class="o">.</span><span class="n">avail_granules</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">count</span><span class="p">,</span> <span class="n">granule</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">region_a</span><span class="o">.</span><span class="n">granules</span><span class="o">.</span><span class="n">avail</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">]):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39; </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">granule</span><span class="p">[</span><span class="s2">&quot;producer_granule_id&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>There are a total of 55 granules that intersect our region. This is too many files to download during a tutorial, although it’s not a huge amount of data.  Let’s take a peek at the ATL11 filenames to help decide what to download.  These filenames follow a specific format:</p>
<p><strong>ATL11_054803_0311_004_01.h5</strong></p>
<p>This name is made up of :</p>
<p><strong>ATL11_ttttrr_c0c1_RRR_VV.h5</strong></p>
<p>where</p>
<ul class="simple">
<li><p>ATL11 is the product name</p></li>
<li><p>tttt is the reference ground track (0548)</p></li>
<li><p>rr is the subregion (03 indicates as ascending track in the northern mid latitudes)</p></li>
<li><p>c0c1 are the first and last repeat-track cycles in the granule</p></li>
<li><p>RRR is the release</p></li>
<li><p>VV is the version</p></li>
</ul>
<p>The subregion is particularly useful here: region 03 are mid-northern-hemisphere ascending tracks, and region 04 are mid-northern-hemisphere descending tracks.  Region 04 crosses the pole.  Let’s start by just downloading region 03.  We’ll use the shell program ‘wget’ to do the downloads, and a regular expression to capture the region number.</p>
<div class="cell tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ATL11_re</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">&#39;ATL11_(\d\d\d\d)(\d\d)_&#39;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">granule</span> <span class="ow">in</span> <span class="n">region_a</span><span class="o">.</span><span class="n">granules</span><span class="o">.</span><span class="n">avail</span><span class="p">:</span>
    <span class="n">this_name</span> <span class="o">=</span> <span class="n">granule</span><span class="p">[</span><span class="s1">&#39;producer_granule_id&#39;</span><span class="p">]</span>
    <span class="c1"># check if each granule has been downloaded already</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="s1">&#39;/tmp/&#39;</span><span class="o">+</span><span class="n">this_name</span><span class="p">):</span>
        <span class="k">continue</span>
    <span class="c1"># pull out the subregion number, skip subregion 4</span>
    <span class="n">subregion</span> <span class="o">=</span> <span class="n">ATL11_re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">this_name</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">subregion</span> <span class="o">==</span> <span class="s1">&#39;03&#39;</span><span class="p">:</span>
        <span class="k">continue</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">this_name</span><span class="p">)</span>
    <span class="o">!</span> wget <span class="o">{</span>granule<span class="o">[</span><span class="s1">&#39;links&#39;</span><span class="o">][</span><span class="m">0</span><span class="o">][</span><span class="s1">&#39;href&#39;</span><span class="o">]}</span> -q
    <span class="c1"># move the granule to a temporary directory</span>
    <span class="o">!</span> mv <span class="o">{</span>granule<span class="o">[</span><span class="s1">&#39;producer_granule_id&#39;</span><span class="o">]}</span> /tmp/
</pre></div>
</div>
</div>
</div>
<p>Let’s see what these files look like.  An easy way to see what is in these granules is to use the ‘h5ls’ utility:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span> h5ls /tmp/ATL11_054803_0311_004_01.h5
</pre></div>
</div>
</div>
</div>
<p>The ‘pt1’,’pt2’, and ‘pt3’ groups contain data for the left, middle and right pair tracks.  It’s in these tracks that we find the data:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span> h5ls /tmp/ATL11_054803_0311_004_01.h5/pt2
</pre></div>
</div>
</div>
</div>
<p>Here we see ‘latitude’, ‘longitude’, ‘delta_time’, and ‘h_corr’, which give the location, timing, and height of the data.</p>
</div>
<div class="section" id="reading-atl11-data-into-a-dictionary">
<h3>3.2 Reading ATL11 data into a dictionary<a class="headerlink" href="#reading-atl11-data-into-a-dictionary" title="Permalink to this headline">¶</a></h3>
<p>To look at the data in the ATL11 files, we will use the <em>h5py</em> package.  We’ll</p>
<ol class="simple">
<li><p>Store the data from each file in a dictionary</p></li>
<li><p>Store the file-level data in another dictionary</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">file_xyth</span><span class="o">=</span><span class="p">{}</span>
<span class="c1"># use the glob package to find the ATL11s that we downloaded</span>
<span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;/tmp/ATL11*.h5&#39;</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="n">file</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">h5f</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">lat</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">h5f</span><span class="p">[</span><span class="s1">&#39;pt2&#39;</span><span class="p">][</span><span class="s1">&#39;latitude&#39;</span><span class="p">])</span>
            <span class="n">lon</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">h5f</span><span class="p">[</span><span class="s1">&#39;pt2&#39;</span><span class="p">][</span><span class="s1">&#39;longitude&#39;</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="n">to_xy_crs</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">)</span>
        <span class="n">file_xyth</span><span class="p">[</span><span class="n">file</span><span class="p">]</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span><span class="n">x</span><span class="p">,</span><span class="s1">&#39;y&#39;</span><span class="p">:</span><span class="n">y</span><span class="p">,</span> <span class="s1">&#39;h&#39;</span><span class="p">:</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">h5f</span><span class="p">[</span><span class="s1">&#39;pt2&#39;</span><span class="p">][</span><span class="s1">&#39;h_corr&#39;</span><span class="p">]),</span> <span class="s1">&#39;t&#39;</span><span class="p">:</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">h5f</span><span class="p">[</span><span class="s1">&#39;pt2&#39;</span><span class="p">][</span><span class="s1">&#39;delta_time&#39;</span><span class="p">])}</span>
        <span class="c1"># read the height values</span>
        <span class="n">temp</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">h5f</span><span class="p">[</span><span class="s1">&#39;pt2&#39;</span><span class="p">][</span><span class="s1">&#39;h_corr&#39;</span><span class="p">])</span>
        <span class="c1"># identify invalid heights, and set them to NaN</span>
        <span class="n">temp</span><span class="p">[</span><span class="n">temp</span><span class="o">==</span><span class="n">h5f</span><span class="p">[</span><span class="s1">&#39;pt2/&#39;</span><span class="p">][</span><span class="s1">&#39;h_corr&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;_FillValue&#39;</span><span class="p">]]</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">NaN</span>
        
        <span class="c1"># store the data in a second dictionary:</span>
        <span class="n">file_xyth</span><span class="p">[</span><span class="n">file</span><span class="p">][</span><span class="s1">&#39;h&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">temp</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="plotting-atl11-measurement-locations">
<h3>3.3 Plotting ATL11 measurement locations<a class="headerlink" href="#plotting-atl11-measurement-locations" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">();</span> 
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">dhdt</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;Spectral&#39;</span><span class="p">,</span> <span class="n">extent</span><span class="o">=</span><span class="n">extent</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="k">for</span> <span class="n">filename</span><span class="p">,</span> <span class="n">D</span> <span class="ow">in</span> <span class="n">file_xyth</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">D</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">],</span> <span class="n">D</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">],</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">filename</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;lower left&#39;</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>The granules extend well beyond our region of interest, but if you zoom in on the edge of the surge region, you’ll see that they all hit (or come close to hitting) the region we specified.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># zoomed-in version for rendered tutorial:</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">();</span> 
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">dhdt</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;Spectral&#39;</span><span class="p">,</span> <span class="n">extent</span><span class="o">=</span><span class="n">extent</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="k">for</span> <span class="n">filename</span><span class="p">,</span> <span class="n">D</span> <span class="ow">in</span> <span class="n">file_xyth</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">D</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">],</span> <span class="n">D</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">],</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">filename</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">XR</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">YR</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;lower left&#39;</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="plotting-atl11-heights">
<h3>3.4 Plotting ATL11 heights<a class="headerlink" href="#plotting-atl11-heights" title="Permalink to this headline">¶</a></h3>
<p>Let’s find the points that are within our bounding box for one of the files:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">xyth</span><span class="o">=</span><span class="n">file_xyth</span><span class="p">[</span><span class="s1">&#39;/tmp/ATL11_054803_0311_004_01.h5&#39;</span><span class="p">]</span>   <span class="c1">#&lt;---------- Try a different ATL11 file here!</span>
<span class="n">ind</span><span class="o">=</span><span class="n">xyth</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">XR</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> 
<span class="n">ind</span> <span class="o">&amp;=</span> <span class="n">xyth</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">XR</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">ind</span> <span class="o">&amp;=</span> <span class="n">xyth</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">YR</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">ind</span> <span class="o">&amp;=</span> <span class="n">xyth</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">YR</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>To get an idea of what’s in the file, we’ll plot the heights against the projected x coordinate for the data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">();</span> 
<span class="k">for</span> <span class="n">cycle</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">12</span><span class="p">):</span>
    <span class="c1"># Cycles in the ATL11 run from 3 to 11, so each cycle&#39;s data is in the cycle-3rd column</span>
    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">xyth</span><span class="p">[</span><span class="s1">&#39;h&#39;</span><span class="p">][</span><span class="n">ind</span><span class="p">,</span><span class="n">cycle</span><span class="o">-</span><span class="mi">3</span><span class="p">])):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xyth</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">][</span><span class="n">ind</span><span class="p">],</span> <span class="n">xyth</span><span class="p">[</span><span class="s1">&#39;h&#39;</span><span class="p">][</span><span class="n">ind</span><span class="p">,</span><span class="n">cycle</span><span class="o">-</span><span class="mi">3</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;cycle=</span><span class="si">{</span><span class="n">cycle</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;polar stereographic x&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;ATL11 height, m&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<p>We can see that on the left-hand side of the ice cap, the height has been constant in time, but the right-hand side of the track samples the region that is thinning rapidly.  Let’s find the data for a point in the thinning region and plot it:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># find the data close to x=1.036e6 </span>
<span class="n">ind_11</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argmin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">xyth</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span><span class="o">-</span><span class="mf">1.036e6</span><span class="p">))</span> <span class="c1">#&lt;-------------Try a different x location here</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xyth</span><span class="p">[</span><span class="s1">&#39;t&#39;</span><span class="p">][</span><span class="n">ind_11</span><span class="p">,:]</span><span class="o">/</span><span class="mi">24</span><span class="o">/</span><span class="mi">3600</span><span class="o">/</span><span class="mf">365.25</span> <span class="o">+</span> <span class="mi">2018</span><span class="p">,</span> <span class="n">xyth</span><span class="p">[</span><span class="s1">&#39;h&#39;</span><span class="p">][</span><span class="n">ind_11</span><span class="p">,:],</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;ATL11 height, m&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;year&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="atl06-height-data">
<h2>4. ATL06 height data<a class="headerlink" href="#atl06-height-data" title="Permalink to this headline">¶</a></h2>
<p>ATL11 data are generated by combining ALT06 data collected over the same ground track, for different cycles.  We can use CMR to identify data from a specific ground track, and we can look at our ATL11 filenames to see what</p>
<p>Next, let’s look at the ATL06 data that were used to generate the ATL11 data.  If we can acquire the ATL06 files for RGT 0548, subregion 03, we’ll have the data that went into this ATL11.</p>
<div class="section" id="querying-cmr-for-atl06-on-a-specific-track">
<h3>4.1 Querying CMR for ATL06 on a specific track<a class="headerlink" href="#querying-cmr-for-atl06-on-a-specific-track" title="Permalink to this headline">¶</a></h3>
<p>Let’s try icePyx to query CMR again to look for these data.  We can use the same query as before, but requesting ATL06, and specifying the ‘tracks’ keyword to obtain only RGT 0548.  Our search box is right on a region boundary, so we’ll check the filenames to obtain only region 3.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">region_b</span> <span class="o">=</span> <span class="n">ipx</span><span class="o">.</span><span class="n">Query</span><span class="p">(</span><span class="s1">&#39;ATL06&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">lonlims</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">latlims</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">lonlims</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">latlims</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="p">[</span><span class="s1">&#39;2018-01-01&#39;</span><span class="p">,</span><span class="s1">&#39;2022-06-01&#39;</span><span class="p">],</span> \
                          <span class="n">start_time</span><span class="o">=</span><span class="s1">&#39;00:00:00&#39;</span><span class="p">,</span> <span class="n">end_time</span><span class="o">=</span><span class="s1">&#39;23:59:59&#39;</span><span class="p">,</span> <span class="n">tracks</span><span class="o">=</span><span class="p">[</span><span class="mi">548</span><span class="p">])</span>
<span class="n">region_b</span><span class="o">.</span><span class="n">avail_granules</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>As before, we can download these granules using wget, using a regular expression to check that each file is actually in our region:</p>
<div class="cell tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># this regular expression matches the track number, the cycle, and the region </span>
<span class="c1"># in an ATL06 filename</span>
<span class="n">ATL06_re</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">&#39;ATL06_\d+_(\d\d\d\d)(\d\d)(\d\d)_&#39;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">granule</span> <span class="ow">in</span> <span class="n">region_b</span><span class="o">.</span><span class="n">granules</span><span class="o">.</span><span class="n">avail</span><span class="p">:</span>
    <span class="n">this_name</span><span class="o">=</span><span class="n">granule</span><span class="p">[</span><span class="s1">&#39;producer_granule_id&#39;</span><span class="p">]</span>
    <span class="c1"># skip the granule if we&#39;re not in region 03</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">ATL06_re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">this_name</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;03&quot;</span><span class="p">:</span>
        <span class="k">continue</span>
    <span class="c1"># check if each granule has been downloaded already</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="s1">&#39;/tmp/&#39;</span><span class="o">+</span><span class="n">this_name</span><span class="p">):</span>
        <span class="k">continue</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">this_name</span><span class="p">)</span>
    <span class="o">!</span> wget -nc <span class="o">{</span>granule<span class="o">[</span><span class="s1">&#39;links&#39;</span><span class="o">][</span><span class="m">0</span><span class="o">][</span><span class="s1">&#39;href&#39;</span><span class="o">]}</span> -q
    <span class="o">!</span> mv <span class="o">{</span>this_name<span class="o">}</span> /tmp
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="structure-of-an-atl06-granule">
<h3>4.2 Structure of an ATL06 granule<a class="headerlink" href="#structure-of-an-atl06-granule" title="Permalink to this headline">¶</a></h3>
<p>And, as before, we can look at the contents of one of these granules using h5ls:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span> h5ls /tmp/ATL06_20191101185115_05480503_005_01.h5
</pre></div>
</div>
</div>
</div>
<p>The latitude, longitude, and height data are in the gtxx/land_ice_segments group:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span> h5ls /tmp/ATL06_20191101185115_05480503_005_01.h5/gt2l/land_ice_segments
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="reading-atl06-data-into-a-dictionary">
<h3>4.3 Reading ATL06 data into a dictionary:<a class="headerlink" href="#reading-atl06-data-into-a-dictionary" title="Permalink to this headline">¶</a></h3>
<p>Let’s read the data, and store them in a dictionary.  We’ll also parse the filename to get the cycle for each file.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cycle_D6</span><span class="o">=</span><span class="p">{}</span>

<span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;/tmp/ATL06*.h5&#39;</span><span class="p">)):</span>
    <span class="n">this_D</span><span class="o">=</span><span class="p">{}</span>
    <span class="k">with</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="n">file</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">h5f</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;latitude&#39;</span><span class="p">,</span><span class="s1">&#39;longitude&#39;</span><span class="p">,</span><span class="s1">&#39;h_li&#39;</span><span class="p">,</span><span class="s1">&#39;atl06_quality_summary&#39;</span><span class="p">,</span><span class="s1">&#39;ground_track/x_atc&#39;</span><span class="p">]:</span>
            <span class="n">temp</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">h5f</span><span class="p">[</span><span class="s1">&#39;gt2r/land_ice_segments&#39;</span><span class="p">][</span><span class="n">field</span><span class="p">])</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">temp</span><span class="p">[</span><span class="n">temp</span><span class="o">==</span><span class="n">h5f</span><span class="p">[</span><span class="s1">&#39;gt2r/land_ice_segments&#39;</span><span class="p">][</span><span class="n">field</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;_FillValue&#39;</span><span class="p">]]</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">NaN</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="c1"># handle the &#39;ground_track/x_atc&#39; field</span>
            <span class="k">if</span> <span class="s1">&#39;/&#39;</span> <span class="ow">in</span> <span class="n">field</span><span class="p">:</span>
                <span class="n">field</span><span class="o">=</span><span class="n">field</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">this_D</span><span class="p">[</span><span class="n">field</span><span class="p">]</span><span class="o">=</span><span class="n">temp</span>
    <span class="n">this_D</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">],</span> <span class="n">this_D</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">to_xy_crs</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">this_D</span><span class="p">[</span><span class="s1">&#39;latitude&#39;</span><span class="p">],</span><span class="n">this_D</span><span class="p">[</span><span class="s1">&#39;longitude&#39;</span><span class="p">])</span>
    <span class="n">cycle_D6</span><span class="p">[</span><span class="n">ATL06_re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">file</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">)]</span> <span class="o">=</span> <span class="n">this_D</span>
</pre></div>
</div>
</div>
</div>
<p>Let’s also figure out what points are within our region of interest:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">cycle</span><span class="p">,</span> <span class="n">D6</span> <span class="ow">in</span> <span class="n">cycle_D6</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">ind</span> <span class="o">=</span> <span class="n">D6</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">XR</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> 
    <span class="n">ind</span> <span class="o">&amp;=</span> <span class="n">D6</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">XR</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">ind</span> <span class="o">&amp;=</span> <span class="n">D6</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">YR</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">ind</span> <span class="o">&amp;=</span> <span class="n">D6</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">YR</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">D6</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">ind</span>
</pre></div>
</div>
</div>
</div>
<p>Now let’s put these granules on the map, using the subset index we just calculated:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">dhdt</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;Spectral&#39;</span><span class="p">,</span> <span class="n">extent</span><span class="o">=</span><span class="n">extent</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="k">for</span> <span class="n">cycle</span><span class="p">,</span> <span class="n">D</span> <span class="ow">in</span> <span class="n">cycle_D6</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">D</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">][</span><span class="n">D</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">]],</span> <span class="n">D</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">][</span><span class="n">D</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">]],</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;cycle &quot;</span><span class="o">+</span><span class="n">cycle</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">XR</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">YR</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;lower left&#39;</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>If you zoom in, you’ll see that there are two cycles (cycle 1 and cycle 2) off by themselves, and the rest are clustered over the RGT.</p>
</div>
<div class="section" id="plotting-atl06-data">
<h3>4.3 Plotting ATL06 data<a class="headerlink" href="#plotting-atl06-data" title="Permalink to this headline">¶</a></h3>
<p>Let’s look at heights. We can plot the surface height (h_li) against the along-track coordinates (x_atc).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="k">for</span> <span class="n">cycle</span><span class="p">,</span> <span class="n">D6</span> <span class="ow">in</span> <span class="n">cycle_D6</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">D6</span><span class="p">[</span><span class="s1">&#39;x_atc&#39;</span><span class="p">][</span><span class="n">D6</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">]],</span><span class="n">D6</span><span class="p">[</span><span class="s1">&#39;h_li&#39;</span><span class="p">][</span><span class="n">D6</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">]],</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;cycle &quot;</span><span class="o">+</span><span class="n">cycle</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;lower left&#39;</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>

<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;ATL06 along-track x, m&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;ATL06 height, m&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>This doesn’t look promising.  We have lots of height values that look nothing like a glacier, much less an island.  Fortunately, ATL06 comes with a quality flag (atl06_quality_summary) that identifies segments that are likely good (zero means no problems).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="k">for</span> <span class="n">cycle</span><span class="p">,</span> <span class="n">D6</span> <span class="ow">in</span> <span class="n">cycle_D6</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">good</span><span class="o">=</span><span class="n">D6</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">]</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">D6</span><span class="p">[</span><span class="s1">&#39;atl06_quality_summary&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">good</span><span class="p">):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">D6</span><span class="p">[</span><span class="s1">&#39;x_atc&#39;</span><span class="p">][</span><span class="n">good</span><span class="p">],</span><span class="n">D6</span><span class="p">[</span><span class="s1">&#39;h_li&#39;</span><span class="p">][</span><span class="n">good</span><span class="p">],</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;cycle &quot;</span><span class="o">+</span><span class="n">cycle</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;ATL06 along-track x, m&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;ATL06 height, m&#39;</span><span class="p">)</span>
        
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;lower left&#39;</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Now we can see what we wanted to see.  The data now run from south to north (the opposite orientation from the previous plots), but we can see where the height is changing.  The height-change signal is somewhat obscured because the tracks are not exactly on top of one another, unlike in ATL11, where the across-track slope is taken into account.</p>
</div>
</div>
<div class="section" id="atl03-data-from-sliderule">
<h2>5. ATL03 data from SlideRule<a class="headerlink" href="#atl03-data-from-sliderule" title="Permalink to this headline">¶</a></h2>
<p>To go one level deeper, we’ll move to a different tool.  The SlideRule project provides ATL03 photon data from a convenient web API.  We’ll request data for one cycle, and show the photon heights and classifications.  SlideRule can query specific ATL03 files, and we can determine what ATL03 we want based on the ATL06 filenames we already have.   (SlideRule can also do CMR queries, but for the purposes of this tutorial, it’s easiest to choose a specific file).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sliderule</span> <span class="kn">import</span> <span class="n">icesat2</span>
<span class="n">url</span><span class="o">=</span><span class="s2">&quot;icesat2sliderule.org&quot;</span>
<span class="n">icesat2</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">granule</span><span class="o">=</span><span class="s1">&#39;ATL06_20190802231121_05480403_005_01.h5&#39;</span>

<span class="n">params</span><span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;poly&#39;</span><span class="p">:[{</span><span class="s1">&#39;lon&#39;</span><span class="p">:</span><span class="n">this_lon</span><span class="p">,</span> <span class="s1">&#39;lat&#39;</span><span class="p">:</span><span class="n">this_lat</span><span class="p">}</span> <span class="k">for</span> <span class="n">this_lon</span><span class="p">,</span> <span class="n">this_lat</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">corners_lon</span><span class="p">,</span> <span class="n">corners_lat</span><span class="p">)],</span>
        <span class="s1">&#39;srt&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span>
         <span class="s1">&#39;cnf&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
        <span class="s1">&#39;len&#39;</span><span class="p">:</span><span class="mi">20</span><span class="p">,</span> 
         <span class="s1">&#39;track&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>
         <span class="s1">&#39;pair&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
         <span class="s1">&#39;pass_invalid&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">}</span>

<span class="n">temp</span><span class="o">=</span><span class="n">icesat2</span><span class="o">.</span><span class="n">atl03s</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="n">granule</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;ATL06&#39;</span><span class="p">,</span><span class="s1">&#39;ATL03&#39;</span><span class="p">),</span> 
                     <span class="n">asset</span><span class="o">=</span><span class="s2">&quot;nsidc-s3&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The SlideRule atl03s function returns a pandas dataFrame containing photon-level data:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">temp</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>In SlideRule, the nomenclature is a little different from elsewhere in the ICESat-2 project : a ‘track’ in SlideRule is a ‘Pair’ elsewhere, and the ‘pair’ variable distinguishes the left and right beams in an ICESat-2 beam pair.</p>
<div class="section" id="plotting-atl03-photon-heights-and-confidence-values">
<h3>5.1  Plotting ATL03 photon heights and confidence values:<a class="headerlink" href="#plotting-atl03-photon-heights-and-confidence-values" title="Permalink to this headline">¶</a></h3>
<p>To plot the data, we’ll obtain the along-track location information using the ‘segment_dist’ and ‘distance’ fields in the dataframe, and use the ‘atl03_cnf’ (confidence that the photon is not noise) to color-code each photon:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">temp_p</span><span class="o">=</span><span class="n">temp</span><span class="p">[</span><span class="n">temp</span><span class="o">.</span><span class="n">pair</span><span class="o">==</span><span class="mi">0</span><span class="p">]</span>
<span class="n">D6</span><span class="o">=</span><span class="n">cycle_D6</span><span class="p">[</span><span class="s1">&#39;04&#39;</span><span class="p">]</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">();</span> 

<span class="n">colors</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;black&#39;</span><span class="p">,</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="s1">&#39;blue&#39;</span><span class="p">,</span><span class="s1">&#39;red&#39;</span><span class="p">,</span><span class="s1">&#39;orange&#39;</span><span class="p">]</span>

<span class="k">for</span> <span class="n">q_val</span><span class="p">,</span> <span class="n">color</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="n">colors</span><span class="p">):</span>
    <span class="n">these</span><span class="o">=</span><span class="n">temp_p</span><span class="p">[</span><span class="s1">&#39;atl03_cnf&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">q_val</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">temp_p</span><span class="p">[</span><span class="s1">&#39;segment_dist&#39;</span><span class="p">][</span><span class="n">these</span><span class="p">]</span><span class="o">+</span><span class="n">temp_p</span><span class="p">[</span><span class="s1">&#39;distance&#39;</span><span class="p">][</span><span class="n">these</span><span class="p">],</span> <span class="n">temp_p</span><span class="o">.</span><span class="n">height</span><span class="p">[</span><span class="n">these</span><span class="p">],</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;along-track x, m&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;ATL03 height, m&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>We can also overlay the ATL06 segment heights on the plot:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">temp_p</span><span class="p">[</span><span class="s1">&#39;segment_dist&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">temp_p</span><span class="p">[</span><span class="s1">&#39;distance&#39;</span><span class="p">],</span> <span class="n">temp_p</span><span class="o">.</span><span class="n">height</span><span class="p">,</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">D6</span><span class="p">[</span><span class="s1">&#39;x_atc&#39;</span><span class="p">][</span><span class="n">D6</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">]],</span> <span class="n">cycle_D6</span><span class="p">[</span><span class="s1">&#39;04&#39;</span><span class="p">][</span><span class="s1">&#39;h_li&#39;</span><span class="p">][</span><span class="n">D6</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">]],</span><span class="s1">&#39;r.&#39;</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;along-track x, m&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;ATL03/06 height, m&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Thanks for following along.  If you look back through the code above, there are a few different places where you can change the regions and the tracks, and see how different data look.  Later on in the hack week you’ll see different (better) ways to do some of the tasks that we’ve done here, but the basic tools (h5py, h5ls, and numpy) are good to have on hand to help debug some of the more advanced techniques.  Happy hacking!</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./tutorials/DataProducts"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="../jupyter.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">GitHub, Git, JupyterHub</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../data_access/data_access_1_intro.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">ICESat-2 Data Discovery, Visualization, and Access Resources</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By eScience Institute, University of Washington<br/>
    
        &copy; Copyright 2021.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>